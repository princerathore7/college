<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Student Signup - Acropolis College</title>
<link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@600&family=Poppins:wght@400;500;600&display=swap" rel="stylesheet">
<style>
  :root{
    --blue:#2f80ed;
    --blue-soft:#eaf3ff;
    --blue-dark:#1c5fd4;
    --text-dark:#1f2937;
    --text-muted:#6b7280;
    --border:#e5e7eb;
    --card:#ffffff;
    --bg:#f4f8ff;
  }

  *{
    box-sizing:border-box;
    margin:0;
    padding:0;
  }

  body{
    font-family:'Inter','Poppins',system-ui,sans-serif;
    min-height:100vh;
    display:flex;
    align-items:center;
    justify-content:center;
    background:linear-gradient(180deg,#f8fbff,#eef4ff);
    color:var(--text-dark);
  }

  .signup-container{
    width:420px;
    background:var(--card);
    padding:34px 30px;
    border-radius:20px;
    text-align:center;
    border:1px solid var(--border);
    box-shadow:0 30px 60px rgba(47,128,237,.18);
  }

  h1{
    font-size:1.7rem;
    font-weight:700;
    color:var(--blue);
    margin-bottom:6px;
  }

  p.subtitle{
    font-size:14px;
    color:var(--text-muted);
    margin-bottom:22px;
  }

  form{
    display:flex;
    flex-direction:column;
    gap:16px;
  }

  input,
  select{
    padding:14px 16px;
    border-radius:14px;
    border:1.5px solid var(--border);
    font-size:15px;
    background:#fff;
    transition:.25s ease;
  }

  input::placeholder{
    color:#9ca3af;
  }

  input:focus,
  select:focus{
    outline:none;
    border-color:var(--blue);
    box-shadow:0 0 0 4px rgba(47,128,237,.15);
  }

  button{
    margin-top:8px;
    padding:14px;
    border-radius:14px;
    border:none;
    background:linear-gradient(135deg,var(--blue),var(--blue-dark));
    color:#fff;
    font-size:16px;
    font-weight:700;
    cursor:pointer;
    letter-spacing:.3px;
    transition:.3s ease;
  }

  button:hover{
    transform:translateY(-2px);
    box-shadow:0 16px 32px rgba(47,128,237,.35);
  }

  .login-link{
    margin-top:18px;
    font-size:14px;
    color:var(--text-muted);
  }

  .login-link a{
    color:var(--blue);
    font-weight:600;
    text-decoration:none;
  }

  .login-link a:hover{
    text-decoration:underline;
  }
  .college-logo{
  width:110px;
  height:auto;
  margin-bottom:14px;
  display:block;
  margin-left:auto;
  margin-right:auto;
}

</style>

</head>
<body>

<div class="signup-container">
    <img 
  src="logo.jpg" 
  alt="Acropolis College Logo" 
  class="college-logo"
/>

  <h1>Student Signup</h1>

  <p class="subtitle">Create your account</p>

  <form id="signupForm">
    <input type="text" id="studentName" placeholder="Full Name" required />
    <input type="text" id="enrollment" placeholder="Enrollment Number" required />
    <input type="password" id="password" placeholder="Password" required />

    <!-- Branch Dropdown -->
<select id="branchSelect" required>
  <option value="">-- Select Branch --</option>

  <!-- CSE Sections -->
  <option value="CSE1">CSE1</option>
  <option value="CSE2">CSE2</option>
  <option value="CSE3">CSE3</option>
  <option value="CSE4">CSE4</option>
  <option value="CSE5">CSE5</option>

  <!-- IT Sections -->
  <option value="IT1">IT1</option>
  <option value="IT2">IT2</option>
  <option value="IT3">IT3</option>
  <option value="IT4">IT4</option>
  <option value="IT5">IT5</option>

  <!-- ECE Sections -->
  <option value="ECE1">ECE1</option>
  <option value="ECE2">ECE2</option>
  <option value="ECE3">ECE3</option>
  <option value="ECE4">ECE4</option>
  <option value="ECE5">ECE5</option>

  <!-- Mechanical Sections -->
  <option value="ME1">ME1</option>
  <option value="ME2">ME2</option>
  <option value="ME3">ME3</option>
  <option value="ME4">ME4</option>
  <option value="ME5">ME5</option>

  <!-- Civil Sections -->
  <option value="CE1">CE1</option>
  <option value="CE2">CE2</option>
  <option value="CE3">CE3</option>
  <option value="CE4">CE4</option>
  <option value="CE5">CE5</option>

  <!-- AI & DS Sections -->
  <option value="AIDS1">AIDS1</option>
  <option value="AIDS2">AIDS2</option>
  <option value="AIDS3">AIDS3</option>
  <option value="AIDS4">AIDS4</option>
  <option value="AIDS5">AIDS5</option>

  <!-- CSD Sections -->
  <option value="CSD1">CSD1</option>
  <option value="CSD2">CSD2</option>
  <option value="CSD3">CSD3</option>
  <option value="CSD4">CSD4</option>
  <option value="CSD5">CSD5</option>

  <!-- EEE Sections -->
  <option value="EEE1">EEE1</option>
  <option value="EEE2">EEE2</option>
  <option value="EEE3">EEE3</option>
  <option value="EEE4">EEE4</option>
  <option value="EEE5">EEE5</option>
</select>

    <!-- Semester Dropdown -->
    <select id="semesterSelect" required>
      <option value="">-- Select Semester --</option>
    </select>

    <!-- Year Dropdown -->
    <select id="yearSelect" required>
      <option value="">-- Select Year --</option>
      <option value="1st">1st Year</option>
      <option value="2nd">2nd Year</option>
      <option value="3rd">3rd Year</option>
      <option value="4th">4th Year</option>
    </select>

    <button type="submit">Sign Up</button>
  </form>

  <div class="login-link">
    Already have an account? <a href="login.html">Login</a>
  </div>
</div>

<script>
/* ===============================
   ACCESS CONTROL — ADMIN PAGES
================================ */

const mentorId = localStorage.getItem("mentorId");
const source   = sessionStorage.getItem("accessSource");

// allowed sources
const ALLOWED_SOURCES = ["ad", "admin"];

if(!mentorId || !ALLOWED_SOURCES.includes(source)){
  document.body.innerHTML = `
    <h2 style="text-align:center;margin-top:20vh;color:red">
      ❌ Access Denied <br>
      Please open this page via Administration Panel
    </h2>
  `;
  throw new Error("Unauthorized access");
}
// Populate semester options (1 to 8)
const semesterSelect = document.getElementById("semesterSelect");
for (let i = 1; i <= 8; i++) {
  const opt = document.createElement("option");
  opt.value = i;
  opt.textContent = `Semester ${i}`;
  semesterSelect.appendChild(opt);
}

// Signup submit
const form = document.getElementById("signupForm");
form.addEventListener("submit", async (e) => {
  e.preventDefault();

  const name = document.getElementById("studentName").value.trim();
  const enrollment = document.getElementById("enrollment").value.trim();
  const password = document.getElementById("password").value.trim();
  const branch = document.getElementById("branchSelect").value;
  const semester = document.getElementById("semesterSelect").value;
  const year = document.getElementById("yearSelect").value;

  if (!branch || !semester || !year)
    return alert("Please select Branch, Semester and Year.");

  try {
    const res = await fetch("https://college-hwbb.onrender.com/api/students/signup", {
      method:"POST",
      headers:{"Content-Type":"application/json"},
      body: JSON.stringify({name, enrollment, password, branch, semester, year})
    });

    const data = await res.json();
    if(res.ok && data.success){
      alert("Signup successful! Redirecting...");
      window.location.href = "login.html";
    } else {
      alert(data.message || "Signup failed");
    }
  } catch(err){
    console.error(err);
    alert("Error connecting to server");
  }
});

</script>

</body>
</html>
