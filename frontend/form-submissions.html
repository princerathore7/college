<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Forms | Admin</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap" rel="stylesheet">

<style>
body{margin:0;background:#f4f6f9;font-family:Inter;padding:30px}
.container{max-width:1100px;margin:auto}
.header{margin-bottom:20px}
.header h1{margin:0}
.grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(280px,1fr));gap:18px}
.card{
  background:#fff;border:1px solid #e1e5ec;
  padding:18px;border-radius:4px
}
.card h3{margin:0;font-size:18px}
.card p{font-size:13px;color:#555}
.btn{
  margin-top:14px;padding:10px 14px;
  border:none;background:#1e90ff;color:#fff;
  font-size:13px;font-weight:600;cursor:pointer
}
.empty{text-align:center;color:#777;padding:40px}
</style>
</head>

<body>

<div class="container">
  <div class="header">
    <h1>Forms</h1>
    <p>Click a form to view submissions</p>
  </div>

  <div class="grid" id="formsGrid"></div>
</div>

<script>
const grid = document.getElementById("formsGrid");

async function loadForms(){
  try{
    const res = await fetch(
      "https://college-hwbb.onrender.com/api/admin/forms"
    );

    if(!res.ok) throw new Error("Server error");

    const forms = await res.json();
    grid.innerHTML = "";

    if(forms.length === 0){
      grid.innerHTML = `<div class="empty">No forms found</div>`;
      return;
    }

    forms.forEach(f=>{
      const div = document.createElement("div");
      div.className="card";
      div.innerHTML=`
        <h3>${f.name}</h3>
        <p>Total Submissions: <b>${f.submissions}</b></p>
        <button class="btn"
          onclick="openForm('${f.id}','${f.name}')">
          View Submissions â†’
        </button>
      `;
      grid.appendChild(div);
    });

  }catch(err){
    console.error(err);
    grid.innerHTML = `<div class="empty">Server error / API not reachable</div>`;
  }
}

function openForm(id,name){
  location.href=`form-data-details.html?formId=${id}&formName=${encodeURIComponent(name)}`;
}

loadForms();
</script>

</body>
</html>
