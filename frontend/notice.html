<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>üì¢ Post Notice</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<style>
body{
  font-family:Inter,Arial,sans-serif;
  background:#f4f6f9;
  margin:0;
}

/* HEADER */
header{
  background:#1e3a8a;
  color:white;
  padding:14px;
  text-align:center;
  font-size:20px;
}

/* MAIN */
.main{
  padding:18px;
  max-width:900px;
  margin:auto;
}

/* ACTION BUTTONS */
.actions{
  display:flex;
  gap:12px;
  margin-bottom:20px;
}
.actions button{
  flex:1;
  padding:12px;
  border:none;
  border-radius:8px;
  font-size:14px;
  cursor:pointer;
  color:white;
}
.view-all{background:#2563eb;}
.view-mine{background:#16a34a;}

/* MODAL */
.modal{
  position:fixed;
  inset:0;
  background:rgba(0,0,0,.4);
  display:none;
  justify-content:center;
  align-items:center;
  z-index:99;
}
.modal.active{display:flex;}

.modal-box{
  background:white;
  width:92%;
  max-width:700px;
  max-height:80vh;
  overflow:auto;
  border-radius:12px;
  padding:15px;
  animation:scaleIn .3s ease;
}
@keyframes scaleIn{
  from{transform:scale(.9);opacity:0}
  to{transform:scale(1);opacity:1}
}
.modal-header{
  display:flex;
  justify-content:space-between;
  align-items:center;
  margin-bottom:10px;
}
.modal-header h3{margin:0}
.close{
  cursor:pointer;
  font-size:20px;
}

/* NOTICE CARD */
.notice-card{
  display:flex;
  gap:12px;
  padding:10px;
  border-radius:10px;
  background:#f8fafc;
  margin-bottom:10px;
  align-items:center;
  animation:fadeUp .4s ease;
}
@keyframes fadeUp{
  from{opacity:0;transform:translateY(6px)}
  to{opacity:1;transform:translateY(0)}
}
.notice-card img{
  width:55px;
  height:55px;
  border-radius:8px;
  object-fit:cover;
  background:#ddd;
}
.notice-info{
  flex:1;
}
.notice-info h4{
  margin:0;
  font-size:15px;
}
.notice-info span{
  font-size:12px;
  color:#555;
}
.delete-btn{
  background:#dc2626;
  color:white;
  border:none;
  padding:6px 10px;
  border-radius:6px;
  cursor:pointer;
}

/* EMPTY */
.empty{
  text-align:center;
  color:#777;
  margin-top:40px;
}
</style>
</head>

<body>

<header>üì¢ Notice Panel</header>

<div class="main">

  <!-- ACTIONS -->
  <div class="actions">
    <button class="view-all" onclick="openAll()">üìÑ View All Notices</button>
    <button class="view-mine" onclick="openMine()">üë§ My Posted Notices</button>
  </div>

  <!-- POST FORM (existing backend works) -->
  <form id="noticeForm">
    <input required placeholder="Notice Title" id="title"
      style="width:100%;padding:10px;border-radius:8px;border:1px solid #ccc;margin-bottom:10px">
    <input type="file" id="image">
    <button style="margin-top:10px;padding:10px;border:none;border-radius:8px;background:#1e40af;color:white">
      üöÄ Post Notice
    </button>
  </form>

</div>

<!-- MODAL -->
<div class="modal" id="modal">
  <div class="modal-box">
    <div class="modal-header">
      <h3 id="modalTitle"></h3>
      <span class="close" onclick="closeModal()">‚úñ</span>
    </div>
    <div id="modalBody"></div>
  </div>
</div>

<script>
const modal=document.getElementById("modal");
const body=document.getElementById("modalBody");

/* STORE MY POSTED NOTICE */
document.getElementById("noticeForm").addEventListener("submit",e=>{
  e.preventDefault();
  const title=document.getElementById("title").value;
  const file=document.getElementById("image").files[0];

  const reader=new FileReader();
  reader.onload=()=>{
    const data={
      id:Date.now(),
      title,
      image:reader.result
    };
    const old=JSON.parse(localStorage.getItem("myPostedNotices")||"[]");
    old.unshift(data);
    localStorage.setItem("myPostedNotices",JSON.stringify(old));
    alert("‚úÖ Notice posted");
    e.target.reset();
  };
  if(file) reader.readAsDataURL(file);
});

/* OPEN ALL */
function openAll(){
  modal.classList.add("active");
  modalTitle.innerText="All Notices";
  body.innerHTML="<div class='empty'>All notices backend se aa rahi hain üëç</div>";
}

/* OPEN MINE */
function openMine(){
  modal.classList.add("active");
  modalTitle.innerText="My Posted Notices";
  const list=JSON.parse(localStorage.getItem("myPostedNotices")||"[]");
  if(!list.length){
    body.innerHTML="<div class='empty'>No notices posted by you</div>";
    return;
  }
  body.innerHTML="";
  list.forEach(n=>{
    body.innerHTML+=`
      <div class="notice-card">
        <img src="${n.image}">
        <div class="notice-info">
          <h4>${n.title}</h4>
          <span>You</span>
        </div>
        <button class="delete-btn" onclick="deleteMine(${n.id})">Delete</button>
      </div>
    `;
  });
}

/* DELETE */
function deleteMine(id){
  if(!confirm("Delete this notice?"))return;
  let list=JSON.parse(localStorage.getItem("myPostedNotices"));
  list=list.filter(n=>n.id!==id);
  localStorage.setItem("myPostedNotices",JSON.stringify(list));
  openMine();
}

/* CLOSE */
function closeModal(){
  modal.classList.remove("active");
}
</script>

</body>
</html>
